<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <title>æ±äº¬å¤§å†’éšª ğŸ–ï¸ | Tokyo 2026</title>
  <link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@500;700;800;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: { sans: ['"M PLUS Rounded 1c"', 'sans-serif'] },
          colors: { draw: { bg: '#FDFCF8', ink: '#2B2D42', yellow: '#FFD166', pink: '#EF476F', blue: '#118AB2', green: '#06D6A0', muted: '#6C757D' } },
          boxShadow: { 'cartoon': '3px 3px 0px 0px #2B2D42', 'cartoon-sm': '2px 2px 0px 0px #2B2D42' }
        }
      }
    }
  </script>
  <style>
    body { background-color: #FDFCF8; -webkit-tap-highlight-color: transparent; overscroll-behavior-y: none; }
    /* é»é™£èƒŒæ™¯ */
    body::before { content: ''; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-image: radial-gradient(#E2E2E2 1.5px, transparent 1.5px); background-size: 24px 24px; z-index: -1; }
    .no-scrollbar::-webkit-scrollbar { display: none; }
    .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    .fade-in { animation: fadeIn 0.3s ease-in-out; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
    .click-effect:active { transform: translate(2px, 2px); box-shadow: 1px 1px 0px 0px #2B2D42 !important; }
    .img-prop { width: 100%; border-radius: 12px; border: 2px solid #2B2D42; cursor: zoom-in; }
    details > summary { list-style: none; }
    details > summary::-webkit-details-marker { display: none; }
    /* é˜²æ­¢åº•éƒ¨å°è¦½åˆ—é®æ“‹å…§å®¹ */
    .pb-safe { padding-bottom: calc(90px + env(safe-area-inset-bottom)); }
  </style>
</head>
<body class="text-draw-ink font-sans h-screen flex flex-col m-0 p-0 overflow-hidden">

  <header class="bg-draw-bg pt-12 pb-4 px-5 flex justify-between items-end shrink-0 z-20 relative">
    <div>
      <h1 class="text-2xl font-black tracking-wide">æ±äº¬å¤§å†’éšª ğŸ‡¯ğŸ‡µ</h1>
      <p class="text-[11px] font-bold text-draw-pink mt-1 bg-white border-2 border-draw-ink shadow-cartoon-sm inline-block px-3 py-1 rounded-full">TOKYO 2026</p>
    </div>
    <div class="bg-draw-yellow text-draw-ink border-2 border-draw-ink shadow-cartoon-sm px-3 py-1.5 rounded-xl font-black flex items-center">
      <i class="fa-solid fa-calendar-day mr-2"></i><span class="text-xs">Mar 12 - 17</span>
    </div>
  </header>

  <main class="flex-1 overflow-y-auto no-scrollbar pb-safe relative z-10 w-full px-4" id="main-content">
      
    <section id="tab-plan" class="fade-in space-y-5">
      
      <div class="bg-white border-2 border-draw-ink shadow-cartoon rounded-2xl p-5 relative mt-3 mb-5">
        <div class="absolute -top-3 left-4 bg-draw-blue text-white text-[11px] font-black px-4 py-1 border-2 border-draw-ink rounded-lg shadow-sm">é è¨‚å¿«è¨Š ğŸ“Œ</div>
        <div id="sheet-content" class="space-y-3 mt-2 text-sm font-bold">
          <div class="text-center text-draw-muted text-xs animate-pulse py-2">æ­£åœ¨è¼‰å…¥æ©Ÿç¥¨èˆ‡ä½å®¿è³‡æ–™...</div>
        </div>
      </div>

      <div class="flex overflow-x-auto no-scrollbar space-x-2 py-1 sticky top-0 bg-draw-bg z-30 -mx-4 px-4 pb-3">
        <button onclick="showDay(1)" id="btn-d1" class="day-btn bg-draw-pink text-white border-2 border-draw-ink shadow-cartoon-sm shrink-0 w-[4.5rem] py-2 rounded-xl font-black text-sm transition-all">D1</button>
        <button onclick="showDay(2)" id="btn-d2" class="day-btn bg-white text-draw-ink border-2 border-draw-ink shadow-cartoon-sm shrink-0 w-[4.5rem] py-2 rounded-xl font-black text-sm transition-all">D2</button>
        <button onclick="showDay(3)" id="btn-d3" class="day-btn bg-white text-draw-ink border-2 border-draw-ink shadow-cartoon-sm shrink-0 w-[4.5rem] py-2 rounded-xl font-black text-sm transition-all">D3</button>
        <button onclick="showDay(4)" id="btn-d4" class="day-btn bg-white text-draw-ink border-2 border-draw-ink shadow-cartoon-sm shrink-0 w-[4.5rem] py-2 rounded-xl font-black text-sm transition-all">D4</button>
        <button onclick="showDay(5)" id="btn-d5" class="day-btn bg-white text-draw-ink border-2 border-draw-ink shadow-cartoon-sm shrink-0 w-[4.5rem] py-2 rounded-xl font-black text-sm transition-all">D5</button>
        <button onclick="showDay(6)" id="btn-d6" class="day-btn bg-white text-draw-ink border-2 border-draw-ink shadow-cartoon-sm shrink-0 w-[4.5rem] py-2 rounded-xl font-black text-sm transition-all">D6</button>
      </div>

      <div id="day-1" class="day-content fade-in space-y-4">
        <div class="bg-white border-2 border-draw-ink shadow-cartoon rounded-2xl p-4">
          <h3 class="font-black text-draw-blue border-b-2 border-dashed border-gray-300 pb-2 mb-3"><i class="fa-solid fa-plane text-xl mr-2"></i> å‡ºç™¼ & è¿ªå£«å°¼</h3>
          <ul class="space-y-4 text-xs font-bold relative border-l-2 border-draw-ink ml-2 pl-4">
            <li class="relative"><div class="absolute -left-[23px] top-0.5 w-3 h-3 bg-draw-pink border-2 border-draw-ink rounded-full"></div>
              <span class="bg-draw-yellow px-2 py-0.5 rounded border-2 border-draw-ink mr-2">03:30</span> æ©Ÿå ´å°ˆè»Šæ¥é€ (FafaCars)
            </li>
            <li class="relative"><div class="absolute -left-[23px] top-0.5 w-3 h-3 bg-white border-2 border-draw-ink rounded-full"></div>
              <span class="text-draw-pink">06:40 èµ·é£›</span> TR898 (TPE â” NRT)
            </li>
            <li class="relative"><div class="absolute -left-[23px] top-0.5 w-3 h-3 bg-white border-2 border-draw-ink rounded-full"></div>
              æ­ä¹˜åˆ©æœ¨æ´¥å·´å£«ç›´é”é£¯åº—é–€å£
              <button onclick="openImg('https://biglocal.github.io/tokyo2026/%E6%88%AA%E5%9C%96%202026-02-22%20%E6%99%9A%E4%B8%8A8.03.44.png?raw=true')" class="block mt-2 bg-draw-blue text-white px-3 py-1 rounded-lg border-2 border-draw-ink shadow-cartoon-sm click-effect"><i class="fa-solid fa-bus mr-1"></i> å·´å£«æ™‚åˆ»è¡¨</button>
            </li>
            <li class="relative"><div class="absolute -left-[23px] top-0.5 w-3 h-3 bg-white border-2 border-draw-ink rounded-full"></div>
              <strong class="text-sm block mb-1">ä¼Šå…‹æ–¯çš®å…’è‰ (Ikspiari) åˆé¤</strong>
              éå¸¸å¤§å‹çš„æ­é¢¨å•†å ´ï¼Œå…­å€‹äººåœ¨é€™è£¡æ‰¾é–“å¯¬æ•çš„é¤å»³è§£æ±ºåˆé¤æœ€ç‚ºèˆ’é©ã€‚
            </li>
            <li class="relative"><div class="absolute -left-[23px] top-0.5 w-3 h-3 bg-draw-green border-2 border-draw-ink rounded-full"></div>
              <span class="bg-draw-green text-white px-2 py-0.5 rounded border-2 border-draw-ink mr-2">15:00</span> Check-in ç©å…·ç¸½å‹•å“¡é£¯åº—
            </li>
            <li class="relative"><div class="absolute -left-[23px] top-0.5 w-3 h-3 bg-white border-2 border-draw-ink rounded-full"></div>
              è¦–é«”åŠ›è³¼è²·å‚æ™šç¥¨é€²è¿ªå£«å°¼æ¨‚åœ’ï¼Œçœ‹å¤œé–“éŠè¡Œèˆ‡ç…™ç« ğŸ†
              <div class="bg-gray-100 p-2 rounded-xl border-2 border-draw-ink mt-2 text-[10px]">
                å‚æ™šç¥¨åƒ¹ï¼šå¹³æ—¥17:00èµ· Â¥4,500-Â¥6,200 / å‡æ—¥15:00èµ· Â¥6,500-Â¥8,700
              </div>
            </li>
          </ul>
        </div>
      </div>

      <div id="day-2" class="day-content hidden fade-in space-y-4">
        <div class="bg-white border-2 border-draw-ink shadow-cartoon rounded-2xl p-4">
          <h3 class="font-black text-draw-pink border-b-2 border-dashed border-gray-300 pb-2 mb-3"><i class="fa-solid fa-wand-magic-sparkles text-xl mr-2"></i> Disney Land å…¨æ—¥</h3>
          <ul class="space-y-4 text-xs font-bold relative border-l-2 border-draw-ink ml-2 pl-4">
            <li class="relative"><div class="absolute -left-[23px] top-0.5 w-3 h-3 bg-draw-pink border-2 border-draw-ink rounded-full"></div>
              <span class="bg-draw-pink text-white px-2 py-0.5 rounded border-2 border-draw-ink mr-2">08:00</span> æŠµé”é–€å£ (08:30 Happy Entry)
            </li>
            <li class="relative"><div class="absolute -left-[23px] top-0.5 w-3 h-3 bg-white border-2 border-draw-ink rounded-full"></div>
              <button onclick="openImg('https://biglocal.github.io/tokyo2026/%E6%88%AA%E5%9C%96%202026-02-22%20%E4%B8%8B%E5%8D%883.23.20.png')" class="w-full bg-draw-yellow px-3 py-2 rounded-xl border-2 border-draw-ink shadow-cartoon-sm click-effect mb-2"><i class="fa-solid fa-map mr-1"></i> å…¥åœ’åœ°åœ–</button>
            </li>
            <li class="relative"><div class="absolute -left-[23px] top-0.5 w-3 h-3 bg-white border-2 border-draw-ink rounded-full"></div>
              <strong class="text-draw-pink text-sm block">å¿…ç©è¨­æ–½æ¸…å–®ï¼š</strong>
              <div class="flex flex-wrap gap-2 mt-2">
                <span class="border-2 border-draw-ink px-2 py-1 rounded bg-white">ç¾å¥³èˆ‡é‡ç¸ (DPA)</span>
                <span class="border-2 border-draw-ink px-2 py-1 rounded bg-white">é£›æ¿ºå±±</span>
                <span class="border-2 border-draw-ink px-2 py-1 rounded bg-white">å·¨é›·å±±</span>
              </div>
            </li>
            <li class="relative"><div class="absolute -left-[23px] top-0.5 w-3 h-3 bg-white border-2 border-draw-ink rounded-full"></div>
              <button onclick="openImg('https://biglocal.github.io/tokyo2026/%E6%88%AA%E5%9C%96%202026-02-22%20%E4%B8%8B%E5%8D%883.23.32.png')" class="w-full bg-draw-blue text-white px-3 py-2 rounded-xl border-2 border-draw-ink shadow-cartoon-sm click-effect mb-2"><i class="fa-solid fa-route mr-1"></i> æŸ¥çœ‹éŠè¡Œè·¯ç·š</button>
            </li>
          </ul>
        </div>
      </div>

      <div id="day-3" class="day-content hidden fade-in space-y-4">
        <div class="bg-draw-yellow border-2 border-draw-ink shadow-cartoon rounded-2xl p-4 text-center">
            <h3 class="font-black text-draw-ink text-sm mb-2"><i class="fa-solid fa-map-location-dot"></i> åŸå®¿/è¡¨åƒé“ æ•£æ­¥åœ°åœ–</h3>
            <div class="bg-white rounded-xl border-2 border-draw-ink h-32 relative overflow-hidden text-[10px] font-bold">
                <div class="absolute top-1/2 w-full border-t-4 border-dashed border-gray-300"></div>
                <div class="absolute left-1/3 h-full border-l-4 border-dashed border-gray-300"></div>
                <span class="absolute top-2 left-2 bg-black text-white px-1">ä¸€è˜­</span>
                <span class="absolute top-2 right-2 bg-green-500 text-white px-1">Human Made</span>
                <span class="absolute bottom-2 left-2 bg-pink-500 text-white px-1">Chanel</span>
                <span class="absolute bottom-2 right-2 bg-yellow-500 text-black px-1">Vivienne W.</span>
                <span class="absolute top-1/2 left-1/2 bg-blue-500 text-white px-1 transform -translate-x-1/2 -translate-y-1/2">Rolex</span>
                <span class="absolute bottom-1/2 left-4 bg-red-500 text-white px-1">Luke's Lobster</span>
            </div>
            <p class="text-[10px] mt-2 font-bold">å‘¨é‚Šæ¨™è¨˜ååº—ï¼Œè©³è¦‹å°è¦½é </p>
        </div>

        <div class="bg-white border-2 border-draw-ink shadow-cartoon rounded-2xl p-4">
          <ul class="space-y-4 text-xs font-bold relative border-l-2 border-draw-ink ml-2 pl-4">
            <li class="relative"><div class="absolute -left-[23px] top-0.5 w-3 h-3 bg-draw-pink border-2 border-draw-ink rounded-full"></div>
              <span class="bg-draw-yellow px-2 py-0.5 rounded border-2 border-draw-ink mr-2">08:30</span> è±ªå¾·å¯º (æ‹›ç¦è²“)
              <img src="https://biglocal.github.io/tokyo2026/day3_cat.png" onclick="openImg(this.src)" class="img-prop mt-2 h-20 object-cover">
            </li>
            <li class="relative"><div class="absolute -left-[23px] top-0.5 w-3 h-3 bg-white border-2 border-draw-ink rounded-full"></div>
              åŸå®¿ â” é’å±±/è¡¨åƒé“ (é€›è¡—)<br>
              <span class="text-[10px] text-draw-blue"><i class="fa-solid fa-train"></i> äº¤é€šç´„20åˆ†</span>
            </li>
            <li class="relative"><div class="absolute -left-[23px] top-0.5 w-3 h-3 bg-white border-2 border-draw-ink rounded-full"></div>
              <strong class="block">å”æ©‹æ¡Œçƒ (ä»£ä»£æœ¨) 10:00 - 19:00</strong>
            </li>
            <li class="relative"><div class="absolute -left-[23px] top-0.5 w-3 h-3 bg-white border-2 border-draw-ink rounded-full"></div>
              æ¾€è°· & SHIBUYA SKY å¤œæ™¯
            </li>
            <li class="relative"><div class="absolute -left-[23px] top-0.5 w-3 h-3 bg-draw-ink border-2 border-draw-ink rounded-full"></div>
              <span class="bg-draw-ink text-white px-2 py-0.5 rounded mr-2">20:00</span> TOYOTAå¾å¦»æ©‹ å–è»Š â” å›æ°‘å®¿
            </li>
          </ul>
        </div>
      </div>

      <div id="day-4" class="day-content hidden fade-in space-y-4">
        <div class="bg-white border-2 border-draw-ink shadow-cartoon rounded-2xl p-2 h-48 overflow-hidden">
            <iframe width="100%" height="100%" frameborder="0" src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d103857.51469371846!2d138.6806509!3d35.498188!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x6019629a42fd61d1%3A0xc6383637e10817b!2z5rKz5Y-j5rmW!5e0!3m2!1szh-TW!2stw!4v1700000000000" class="rounded-xl border-2 border-draw-ink pointer-events-none"></iframe>
        </div>
        <div class="bg-white border-2 border-draw-ink shadow-cartoon rounded-2xl p-4">
          <ul class="space-y-4 text-xs font-bold relative border-l-2 border-draw-ink ml-2 pl-4">
            <li class="relative"><div class="absolute -left-[23px] top-0.5 w-3 h-3 bg-draw-green border-2 border-draw-ink rounded-full"></div>
              <span class="bg-draw-green text-white px-2 py-0.5 rounded border-2 border-draw-ink mr-2">06:30</span> é–‹è»Šå‡ºç™¼å‰å¾€æ²³å£æ¹– ğŸ—»
            </li>
            <li class="relative"><div class="absolute -left-[23px] top-0.5 w-3 h-3 bg-white border-2 border-draw-ink rounded-full"></div>
              æ™šé¤ï¼šAFURI å—ç”ºç”° Grandberry Parkåº— ğŸœ
            </li>
            <li class="relative"><div class="absolute -left-[23px] top-0.5 w-3 h-3 bg-draw-ink border-2 border-draw-ink rounded-full"></div>
              <span class="bg-draw-ink text-white px-2 py-0.5 rounded mr-2">19:00å‰</span> å¾å¦»æ©‹åº— é‚„è»Š ğŸš—
            </li>
          </ul>
        </div>
      </div>

      <div id="day-5" class="day-content hidden fade-in space-y-4">
        <div class="bg-white border-2 border-draw-ink shadow-cartoon rounded-2xl p-4 flex justify-between items-center text-center font-black text-xs">
            <div><i class="fa-solid fa-torii-gate text-draw-pink text-2xl mb-1"></i><br>æ·ºè‰å¯º</div>
            <i class="fa-solid fa-arrow-right text-gray-300"></i>
            <div><i class="fa-solid fa-gamepad text-draw-blue text-2xl mb-1"></i><br>ç§‹è‘‰åŸ</div>
            <i class="fa-solid fa-arrow-right text-gray-300"></i>
            <div><i class="fa-solid fa-train text-draw-green text-2xl mb-1"></i><br>æ±äº¬ç«™</div>
            <i class="fa-solid fa-arrow-right text-gray-300"></i>
            <div><i class="fa-solid fa-gem text-draw-yellow text-2xl mb-1"></i><br>éŠ€åº§</div>
        </div>
        <div class="bg-white border-2 border-draw-ink shadow-cartoon rounded-2xl p-4 text-xs font-bold">
            <p><i class="fa-solid fa-train-subway text-draw-blue"></i> å„é»äº¤é€šæ™‚é–“ç´„ 10~15 åˆ†é˜ã€‚</p>
            <p class="mt-2 text-draw-muted">ä»Šæ—¥ä¸»æ”»æ·ºè‰å¯ºåƒæ‹œã€ç§‹è‘‰åŸå‹•æ¼«é›»å™¨ï¼Œä¸‹åˆè‡³æ±äº¬è»Šç«™èˆ‡éŠ€åº§äº«å—ç²¾å“è³¼ç‰©ã€‚</p>
        </div>
      </div>

      <div id="day-6" class="day-content hidden fade-in space-y-4">
        <div class="bg-white border-2 border-draw-ink shadow-cartoon rounded-2xl p-4">
          <ul class="space-y-4 text-xs font-bold relative border-l-2 border-draw-ink ml-2 pl-4">
            <li class="relative"><div class="absolute -left-[23px] top-0.5 w-3 h-3 bg-white border-2 border-draw-ink rounded-full"></div>
              <span class="bg-draw-yellow px-2 py-0.5 rounded border-2 border-draw-ink mr-2">09:00</span> èµ·åºŠæ•´ç†ï¼Œæ©Ÿå ´æ¥é€è‡³æˆç”°
            </li>
            <li class="relative"><div class="absolute -left-[23px] top-0.5 w-3 h-3 bg-white border-2 border-draw-ink rounded-full"></div>
              <span class="text-draw-pink">13:45 èµ·é£›</span> JX801 (NRT T2 â” TPE)
            </li>
            <li class="relative"><div class="absolute -left-[23px] top-0.5 w-3 h-3 bg-draw-ink border-2 border-draw-ink rounded-full"></div>
              <span class="bg-draw-ink text-white px-2 py-0.5 rounded mr-2">16:50</span> æŠµé”å°ç£ï¼Œå°ˆè»Šæ¥é€æº«æš–çš„å®¶ ğŸ¡
            </li>
          </ul>
        </div>
      </div>
    </section>

    <section id="tab-guide" class="hidden fade-in space-y-4">
      <h2 class="font-black text-xl mb-2"><i class="fa-solid fa-book-open text-draw-yellow mr-2"></i> æ·±åº¦å°è¦½</h2>
      
      <details class="bg-white border-2 border-draw-ink shadow-cartoon rounded-2xl group outline-none">
        <summary class="font-black p-4 border-b-2 border-transparent group-open:border-draw-ink cursor-pointer flex justify-between">
          <span>ğŸ›ï¸ åŸå®¿/è¡¨åƒé“/éŠ€åº§ é€›è¡—å•†åº—</span><i class="fa-solid fa-chevron-down mt-1 transition-transform group-open:rotate-180"></i>
        </summary>
        <div class="p-4 text-xs font-bold space-y-2 bg-gray-50 rounded-b-xl">
          <p><span class="bg-pink-200 px-1 rounded border border-black">Chanel</span> éŠ€åº§æ——è‰¦åº—ã€è¡¨åƒé“åº—ã€‚</p>
          <p><span class="bg-yellow-200 px-1 rounded border border-black">Vivienne Westwood</span> é’å±±æ——è‰¦åº—ã€GINZA SIXã€‚</p>
          <p><span class="bg-green-200 px-1 rounded border border-black">Human Made</span> åŸå®¿åº— (å¸¸é ˆæ’éšŠ)ã€éŠ€åº§ DSMã€‚</p>
          <p><span class="bg-blue-200 px-1 rounded border border-black">Rolex</span> è¡¨åƒé“ã€éŠ€åº§å¤šé–“åˆ†åº—ï¼Œçœ‹é‹æ°£ã€‚</p>
        </div>
      </details>

      <details class="bg-white border-2 border-draw-ink shadow-cartoon rounded-2xl group outline-none">
        <summary class="font-black p-4 border-b-2 border-transparent group-open:border-draw-ink cursor-pointer flex justify-between">
          <span>ğŸ—» æ²³å£æ¹– æ¨è–¦æ™¯é»</span><i class="fa-solid fa-chevron-down mt-1 transition-transform group-open:rotate-180"></i>
        </summary>
        <div class="p-4 text-xs font-bold space-y-2 bg-gray-50 rounded-b-xl">
          <li>æ–°å€‰å±±æ·ºé–“å…¬åœ’ (ç¶“å…¸äº”é‡å¡”èˆ‡å¯Œå£«å±±)</li>
          <li>å¤§çŸ³å…¬åœ’ (æ¹–ç•”æ­¥é“)</li>
          <li>ä¸‹å‰ç”°å•†åº—è¡— (ç¶²ç´…æ‹ç…§è·¯å£ï¼Œæ³¨æ„è»Šè¼›)</li>
        </div>
      </details>

      <details class="bg-white border-2 border-draw-ink shadow-cartoon rounded-2xl group outline-none">
        <summary class="font-black p-4 border-b-2 border-transparent group-open:border-draw-ink cursor-pointer flex justify-between">
          <span>âœ¨ teamLab Planets æ”»ç•¥</span><i class="fa-solid fa-chevron-down mt-1 transition-transform group-open:rotate-180"></i>
        </summary>
        <div class="p-4 text-xs font-bold space-y-3 bg-gray-50 rounded-b-xl text-center">
          <p>é¤¨å…§éœ€æ¶‰æ°´è‡³å°è…¿ï¼Œå¼·çƒˆå»ºè­°ç©¿è‘—çŸ­è¤²æˆ–æ˜“æ²è¤²ç®¡çš„æœè£ã€‚ç¾å ´å¯å…è²»å€Ÿç”¨æ‰‹æ©Ÿé˜²æ°´è¢‹ã€‚</p>
          <a href="https://lovetogo.tw/202501-tokyo/teamlab-planets/index.php" target="_blank" class="inline-block bg-draw-blue text-white px-4 py-2 rounded-xl border-2 border-draw-ink shadow-cartoon-sm click-effect"><i class="fa-solid fa-link"></i> æŸ¥çœ‹è©³ç´°åœ–æ–‡å°è¦½</a>
        </div>
      </details>

      <div class="bg-white border-2 border-draw-ink shadow-cartoon rounded-2xl p-2 mt-4">
        <p class="font-black text-sm mb-2 ml-2"><i class="fa-solid fa-map"></i> è¿ªå£«å°¼å‘¨é‚Šåœ°åœ–</p>
        <iframe width="100%" height="200" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://www.openstreetmap.org/export/embed.html?bbox=139.8732%2C35.6263%2C139.8892%2C35.6373&layer=mapnik" class="border-2 border-draw-ink rounded-xl"></iframe>
      </div>
    </section>

    <section id="tab-wallet" class="hidden fade-in space-y-5">
      <div class="bg-draw-green text-draw-ink border-2 border-draw-ink shadow-cartoon rounded-2xl p-4 flex justify-between items-center">
        <div>
          <p class="text-[10px] font-black mb-1">è‡ªè¨‚åŒ¯ç‡ (1 JPY = ? TWD)</p>
          <div class="flex items-center gap-2">
            <input type="number" id="rate-input" value="0.215" step="0.001" class="w-20 px-2 py-1 rounded border-2 border-draw-ink font-black text-sm outline-none">
            <button onclick="saveRate()" class="bg-white px-2 py-1 rounded border-2 border-draw-ink shadow-cartoon-sm click-effect text-xs font-black">å„²å­˜</button>
          </div>
        </div>
        <div class="text-right">
          <p class="text-[10px] font-black">å°å¹£ç¸½èŠ±è²»</p>
          <p id="total-twd" class="text-xl font-black text-white drop-shadow-md">NT$ 0</p>
        </div>
      </div>

      <div class="bg-white border-2 border-draw-ink shadow-cartoon rounded-2xl p-4 space-y-3">
        <h3 class="font-black text-sm"><i class="fa-solid fa-coins text-draw-yellow"></i> è¨˜ä¸€ç­†</h3>
        <input type="text" id="exp-name" placeholder="å“é …åç¨± (ä¾‹: æ‰­è›‹)" class="w-full bg-gray-50 border-2 border-draw-ink rounded-xl p-3 text-sm font-bold outline-none">
        <input type="text" id="exp-jpy" placeholder="æ—¥å¹£é‡‘é¡ (æ”¯æ´ç®—å¼å¦‚ 500+200*3)" class="w-full bg-gray-50 border-2 border-draw-ink rounded-xl p-3 text-sm font-bold outline-none">
        
        <div class="flex gap-2">
          <input type="file" id="exp-img" accept="image/*" class="hidden" onchange="previewImg(event)">
          <label for="exp-img" class="flex-1 bg-draw-blue text-white text-center rounded-xl p-3 border-2 border-draw-ink shadow-cartoon-sm click-effect text-xs font-black cursor-pointer"><i class="fa-solid fa-camera"></i> æ‹ç…§/ä¸Šå‚³</label>
          <button onclick="addExpense()" class="flex-1 bg-draw-pink text-white text-center rounded-xl p-3 border-2 border-draw-ink shadow-cartoon-sm click-effect text-xs font-black"><i class="fa-solid fa-plus"></i> å„²å­˜</button>
        </div>
        <div id="img-preview-box" class="hidden relative w-16 h-16 border-2 border-draw-ink rounded-xl overflow-hidden mt-2">
          <img id="img-preview" src="" class="w-full h-full object-cover">
          <button onclick="removePreview()" class="absolute top-0 right-0 bg-red-500 text-white w-5 h-5 flex items-center justify-center text-[10px]"><i class="fa-solid fa-times"></i></button>
        </div>
      </div>

      <div id="expense-list" class="space-y-3 pb-4"></div>
    </section>

    <section id="tab-lists" class="hidden fade-in space-y-5">
      <div class="bg-white border-2 border-draw-ink shadow-cartoon rounded-2xl p-4">
        <h3 class="font-black text-sm mb-3"><i class="fa-solid fa-clipboard-check text-draw-green"></i> è¡Œå‰æº–å‚™ CheckList</h3>
        <div id="checklist-box" class="space-y-2 text-sm font-bold"></div>
      </div>

      <div class="bg-white border-2 border-draw-ink shadow-cartoon rounded-2xl p-4">
        <h3 class="font-black text-sm mb-3"><i class="fa-solid fa-pen text-draw-pink"></i> å€‹äººå‚™å¿˜éŒ„</h3>
        <textarea id="memo-input" rows="4" class="w-full bg-gray-50 border-2 border-draw-ink rounded-xl p-3 text-sm font-bold outline-none mb-2" placeholder="è²¼ä¸Šç¶²å€æœƒè‡ªå‹•è®ŠæˆæŒ‰éˆ•å–”..."></textarea>
        <button onclick="saveMemo()" class="w-full bg-draw-yellow border-2 border-draw-ink shadow-cartoon-sm rounded-xl py-2 font-black text-sm click-effect">å„²å­˜å‚™å¿˜éŒ„</button>
        <div id="memo-display" class="mt-4 text-xs font-bold leading-relaxed hidden bg-gray-100 p-3 border-2 border-draw-ink rounded-xl break-words"></div>
      </div>
    </section>

    <section id="tab-info" class="hidden fade-in space-y-4">
      
      <details class="bg-white border-2 border-draw-ink shadow-cartoon rounded-2xl group outline-none" open>
        <summary class="font-black p-4 border-b-2 border-transparent group-open:border-draw-ink cursor-pointer flex justify-between bg-draw-blue text-white rounded-t-xl group-open:rounded-b-none">
          <span><i class="fa-solid fa-car"></i> æ©Ÿå ´æ¥é€è©³ç´°è³‡è¨Š (FafaCars)</span><i class="fa-solid fa-chevron-down mt-1 transition-transform group-open:rotate-180"></i>
        </summary>
        <div class="p-4 text-[10px] font-bold space-y-4">
          <div>
            <span class="bg-draw-yellow px-2 py-0.5 rounded border border-black mb-1 inline-block text-black">å»ç¨‹ 03/12 (å››) 03:30 å‡ºç™¼</span>
            <p>é€æ©Ÿï¼šTR898</p>
            <p>è»Šè³‡ï¼š$2400 (å«è½‰é»+å¤œé–“åŠ æˆ)</p>
          </div>
          <div class="border-t-2 border-dashed border-gray-300 pt-2">
            <span class="bg-draw-pink text-white px-2 py-0.5 rounded border border-black mb-1 inline-block">å›ç¨‹ 03/17 (äºŒ) 16:50 æŠµé”</span>
            <p>æ¥æ©Ÿï¼šJX801</p>
            <p>è»Šè³‡ï¼š$2100 (å«è½‰é»)</p>
          </div>
          <div class="bg-gray-100 p-2 rounded-xl border border-draw-ink">
            <p class="text-draw-blue mb-1">å¸æ©Ÿè³‡æ–™ (07)ï¼šå²è‚²èª </p>
            <p>é›»è©±ï¼š<a href="tel:0937660220" class="underline">0937660220</a></p>
            <p>è»Šè™Ÿï¼šRBF-7952 (Hyundai Staria é»‘)</p>
            <p class="mt-1 text-[9px] text-gray-500">ä¹˜å®¢ï¼šéƒ­èªå®‰ç­‰6äºº (28å‹x4ã€ç™»æ©Ÿç®±x3)</p>
          </div>
        </div>
      </details>

      <div class="grid grid-cols-2 gap-3">
        <a href="https://www.jma.go.jp/jma/index.html" target="_blank" class="bg-white border-2 border-draw-ink shadow-cartoon-sm rounded-xl p-3 text-center click-effect font-black text-xs"><i class="fa-solid fa-cloud-sun text-draw-blue text-2xl block mb-1"></i> æ—¥æœ¬æ°£è±¡å»³</a>
        <a href="https://www.e-japannavi.com/trans/tokyo_images/mtrmap.pdf" target="_blank" class="bg-white border-2 border-draw-ink shadow-cartoon-sm rounded-xl p-3 text-center click-effect font-black text-xs"><i class="fa-solid fa-train-subway text-draw-green text-2xl block mb-1"></i> åœ°éµåœ°åœ– PDF</a>
      </div>

      <div class="bg-draw-ink text-white border-2 border-draw-ink shadow-cartoon rounded-2xl p-4 font-black text-xs">
        <h3 class="text-draw-yellow mb-2"><i class="fa-solid fa-phone"></i> ç·Šæ€¥è¯çµ¡</h3>
        <p>è­¦å¯Ÿå±€ï¼š<a href="tel:110" class="underline">110</a></p>
        <p>æ•‘è­·è»Šï¼š<a href="tel:119" class="underline">119</a></p>
        <p>é§æ—¥è¾¦äº‹è™•ï¼š<a href="tel:0332807811" class="underline">03-3280-7811</a></p>
      </div>

      <div class="bg-white border-2 border-draw-ink shadow-cartoon rounded-2xl p-4 font-bold text-xs text-draw-pink">
        <h3 class="font-black mb-2"><i class="fa-solid fa-triangle-exclamation"></i> æ³¨æ„äº‹é …</h3>
        <ul class="list-disc pl-4 space-y-1">
          <li>åš´ç¦æ”œå¸¶è‚‰é¡è£½å“å›å°ã€‚</li>
          <li>æ—¥æœ¬é›»è»Šå…§è«‹å‹¿è¬›é›»è©±ã€‚</li>
          <li>éš¨èº«æ¶²é«”å–®ç“¶ä¸å¯è¶…é100mlã€‚</li>
        </ul>
      </div>

    </section>

  </main>

  <nav class="bg-white border-t-2 border-draw-ink fixed bottom-0 w-full z-40 pb-[env(safe-area-inset-bottom)]">
    <div class="flex justify-around items-center pt-2 pb-2">
      <button onclick="switchTab('plan', this)" class="nav-btn text-draw-pink flex flex-col items-center w-14 transition-transform active:scale-95">
        <i class="fa-solid fa-map-location-dot text-xl mb-1"></i><span class="text-[10px] font-black">è¡Œç¨‹</span>
      </button>
      <button onclick="switchTab('guide', this)" class="nav-btn text-draw-muted flex flex-col items-center w-14 transition-transform active:scale-95">
        <i class="fa-solid fa-book-open text-xl mb-1"></i><span class="text-[10px] font-black">å°è¦½</span>
      </button>
      <button onclick="switchTab('wallet', this)" class="nav-btn text-draw-muted flex flex-col items-center w-14 transition-transform active:scale-95">
        <i class="fa-solid fa-wallet text-xl mb-1"></i><span class="text-[10px] font-black">è¨˜å¸³</span>
      </button>
      <button onclick="switchTab('lists', this)" class="nav-btn text-draw-muted flex flex-col items-center w-14 transition-transform active:scale-95">
        <i class="fa-solid fa-clipboard-check text-xl mb-1"></i><span class="text-[10px] font-black">æ¸…å–®</span>
      </button>
      <button onclick="switchTab('info', this)" class="nav-btn text-draw-muted flex flex-col items-center w-14 transition-transform active:scale-95">
        <i class="fa-solid fa-circle-info text-xl mb-1"></i><span class="text-[10px] font-black">è³‡è¨Š</span>
      </button>
    </div>
  </nav>

  <div id="lightbox" class="hidden fixed inset-0 z-50 bg-black/90 flex justify-center items-center p-4" onclick="closeImg()">
    <img id="lightbox-img" src="" class="max-w-full max-h-full object-contain rounded-xl border-2 border-white">
    <button class="absolute top-4 right-4 text-white text-3xl"><i class="fa-solid fa-times"></i></button>
  </div>

  <script>
    /* ========== Navigation & Tabs ========== */
    const TABS = ['plan', 'guide', 'wallet', 'lists', 'info'];
    const COLORS = ['text-draw-pink', 'text-draw-yellow', 'text-draw-green', 'text-draw-blue', 'text-draw-ink'];

    function switchTab(tabId, el) {
      TABS.forEach(t => document.getElementById(`tab-${t}`).classList.add('hidden'));
      document.getElementById(`tab-${tabId}`).classList.remove('hidden');
      
      document.querySelectorAll('.nav-btn').forEach(btn => {
        btn.className = btn.className.replace(/text-draw-\w+/g, 'text-draw-muted');
      });
      el.classList.remove('text-draw-muted');
      el.classList.add(COLORS[TABS.indexOf(tabId)]);
      document.getElementById('main-content').scrollTop = 0;
    }

    function showDay(day) {
      for(let i=1; i<=6; i++) {
        document.getElementById(`day-${i}`).classList.add('hidden');
        let btn = document.getElementById(`btn-d${i}`);
        btn.classList.replace('bg-draw-pink', 'bg-white');
        btn.classList.replace('bg-draw-yellow', 'bg-white');
        btn.classList.replace('text-white', 'text-draw-ink');
      }
      document.getElementById(`day-${day}`).classList.remove('hidden');
      let target = document.getElementById(`btn-d${day}`);
      target.classList.replace('bg-white', day===1 ? 'bg-draw-pink' : 'bg-draw-yellow');
      target.classList.replace('text-draw-ink', 'text-white');
    }

    function openImg(src) {
      document.getElementById('lightbox-img').src = src;
      document.getElementById('lightbox').classList.remove('hidden');
    }
    function closeImg() { document.getElementById('lightbox').classList.add('hidden'); }

    /* ========== Google Sheet Fetch (Booking Info) ========== */
    function loadSheet() {
      // æŒ‡å®šè®€å– fly_cat_hotels åˆ†é 
      const url = `https://docs.google.com/spreadsheets/d/16uetEwwxz6h9jG4iwl64O8KVmk7eFTIgQtOZ95R8Hmc/gviz/tq?tqx=out:json&sheet=fly_cat_hotels`;
      fetch(url).then(r => r.text()).then(txt => {
        const json = JSON.parse(txt.substring(txt.indexOf('{'), txt.lastIndexOf('}') + 1));
        const rows = json.table.rows;
        let html = '';
        rows.forEach((row, i) => {
          if(i===0) return; // skip header
          if(row.c && row.c[0] && row.c[1]) {
            html += `<div class="flex items-center justify-between border-b-2 border-dashed border-gray-200 pb-3 last:border-0 last:pb-0">
                       <span class="text-draw-ink text-sm font-black pr-2">${row.c[0].v}</span>
                       <a href="${row.c[1].v}" target="_blank" class="bg-draw-yellow text-draw-ink px-3 py-1 rounded-lg border-2 border-draw-ink shadow-cartoon-sm click-effect text-xs whitespace-nowrap"><i class="fa-solid fa-link mr-1"></i>æŸ¥çœ‹</a>
                     </div>`;
          }
        });
        if(html) {
          document.getElementById('sheet-content').innerHTML = html;
        } else {
          document.getElementById('sheet-content').innerHTML = '<div class="text-center text-draw-muted text-xs">ç›®å‰æ²’æœ‰é è¨‚è³‡æ–™å–”ï¼</div>';
        }
      }).catch(e => {
          document.getElementById('sheet-content').innerHTML = '<div class="text-center text-red-500 text-xs">è®€å–å¤±æ•—ï¼Œè«‹ç¢ºèªè©¦ç®—è¡¨å…±ç”¨è¨­å®š</div>';
      });
    }

    /* ========== Wallet ========== */
    let rate = parseFloat(localStorage.getItem('tk_rate')) || 0.215;
    let expenses = JSON.parse(localStorage.getItem('tk_exp')) || [];
    let b64 = null;

    function saveRate() {
      rate = parseFloat(document.getElementById('rate-input').value) || 0.215;
      localStorage.setItem('tk_rate', rate);
      renderExp();
      alert("åŒ¯ç‡å·²æ›´æ–°ï¼");
    }

    function previewImg(e) {
      const file = e.target.files[0];
      if(!file) return;
      const reader = new FileReader();
      reader.onload = function(event) {
        const img = new Image();
        img.onload = function() {
          const canvas = document.createElement('canvas');
          let w = img.width, h = img.height;
          if(w > 300) { h *= 300/w; w = 300; }
          canvas.width = w; canvas.height = h;
          canvas.getContext('2d').drawImage(img, 0, 0, w, h);
          b64 = canvas.toDataURL('image/jpeg', 0.6);
          document.getElementById('img-preview').src = b64;
          document.getElementById('img-preview-box').classList.remove('hidden');
        };
        img.src = event.target.result;
      };
      reader.readAsDataURL(file);
    }
    function removePreview() {
      b64 = null;
      document.getElementById('exp-img').value = '';
      document.getElementById('img-preview-box').classList.add('hidden');
    }

    function addExpense() {
      const name = document.getElementById('exp-name').value;
      const math = document.getElementById('exp-jpy').value;
      if(!name || !math) return alert("è«‹è¼¸å…¥åç¨±å’Œé‡‘é¡");
      let jpy = 0;
      try { jpy = Math.round(eval(math.replace(/[^0-9+\-*/().]/g, ''))); } 
      catch(e) { return alert("ç®—å¼éŒ¯èª¤"); }
      
      expenses.unshift({ id: Date.now(), name, jpy, img: b64, date: new Date().toLocaleDateString('zh-TW',{month:'numeric',day:'numeric'}) });
      localStorage.setItem('tk_exp', JSON.stringify(expenses));
      document.getElementById('exp-name').value = '';
      document.getElementById('exp-jpy').value = '';
      removePreview();
      renderExp();
    }
    function delExp(id) {
      expenses = expenses.filter(e => e.id !== id);
      localStorage.setItem('tk_exp', JSON.stringify(expenses));
      renderExp();
    }
    function renderExp() {
      document.getElementById('rate-input').value = rate;
      const list = document.getElementById('expense-list');
      let twdTotal = 0;
      list.innerHTML = expenses.map(e => {
        const twd = Math.round(e.jpy * rate);
        twdTotal += twd;
        const imgTag = e.img ? `<img src="${e.img}" onclick="openImg(this.src)" class="w-12 h-12 object-cover border-2 border-draw-ink rounded-lg cursor-zoom-in">` : '<div class="w-12 h-12 bg-gray-100 border-2 border-draw-ink rounded-lg flex items-center justify-center text-gray-400"><i class="fa-solid fa-receipt"></i></div>';
        return `<div class="bg-white border-2 border-draw-ink shadow-cartoon-sm rounded-xl p-3 flex gap-3 items-center">
                  ${imgTag}
                  <div class="flex-1 font-bold">
                    <div class="flex justify-between text-sm"><span>${e.name}</span> <button onclick="delExp(${e.id})" class="text-draw-pink"><i class="fa-solid fa-trash"></i></button></div>
                    <div class="flex justify-between text-xs text-draw-muted mt-1"><span>Â¥${e.jpy}</span> <span class="text-draw-ink">NT$${twd}</span></div>
                  </div>
                </div>`;
      }).join('');
      document.getElementById('total-twd').innerText = `NT$ ${twdTotal.toLocaleString()}`;
    }

    /* ========== Lists ========== */
    const defaultChk = ["è­·ç…§æ­£æœ¬ (æ•ˆæœŸ>6å€‹æœˆ)", "æ—¥å¹£ç¾é‡‘èˆ‡ä¿¡ç”¨å¡", "ç¶²å¡ / eSIM", "è¿ªå£«å°¼é–€ç¥¨ / è¨‚å–®", "è¡Œå‹•é›»æº", "å€‹äººè—¥å“", "è¼•ä¾¿é›¨å…·"];
    function initLists() {
      const saved = JSON.parse(localStorage.getItem('tk_chk')) || {};
      const html = defaultChk.map((item, i) => {
        const chk = saved[i] ? 'checked' : '';
        const line = saved[i] ? 'line-through text-draw-muted' : '';
        return `<label class="flex items-center gap-3 p-2 border-b border-gray-100 last:border-0"><input type="checkbox" onchange="toggleChk(${i}, this)" ${chk} class="w-5 h-5 accent-draw-green"><span id="chk-txt-${i}" class="${line}">${item}</span></label>`;
      }).join('');
      document.getElementById('checklist-box').innerHTML = html;
      
      const memo = localStorage.getItem('tk_memo') || '';
      document.getElementById('memo-input').value = memo;
      renderMemo(memo);
    }
    function toggleChk(i, el) {
      const saved = JSON.parse(localStorage.getItem('tk_chk')) || {};
      saved[i] = el.checked;
      localStorage.setItem('tk_chk', JSON.stringify(saved));
      const txt = document.getElementById(`chk-txt-${i}`);
      if(el.checked) txt.classList.add('line-through', 'text-draw-muted');
      else txt.classList.remove('line-through', 'text-draw-muted');
    }
    function saveMemo() {
      const memo = document.getElementById('memo-input').value;
      localStorage.setItem('tk_memo', memo);
      renderMemo(memo);
      alert('å‚™å¿˜éŒ„å·²å„²å­˜');
    }
    function renderMemo(text) {
      const div = document.getElementById('memo-display');
      if(!text) return div.classList.add('hidden');
      div.classList.remove('hidden');
      const safe = text.replace(/</g, '<').replace(/>/g, '>');
      div.innerHTML = safe.replace(/(https?:\/\/[^\s]+)/g, `<a href="$1" target="_blank" class="inline-block bg-draw-blue text-white px-2 py-1 rounded-md border border-draw-ink my-1"><i class="fa-solid fa-link"></i> é€£çµ</a>`).replace(/\n/g, '<br>');
    }

    window.onload = () => {
      loadSheet();
      renderExp();
      initLists();
    };
  </script>
</body>
</html>
